(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["auditions.round"],{4700:function(t,e,a){"use strict";var s=a("8943"),n=a.n(s);n.a},"5c18":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex flex-col justify-center  bg-white w-full  max-h-full"},[a("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":t.fullPage},on:{"update:active":function(e){t.isLoading=e}}}),a("form",{staticClass:"relative flex flex-col justify-center",attrs:{"data-vv-scope":"create"},on:{submit:function(e){return e.preventDefault(),t.handleCreate(e)}}},[a("div",{staticClass:"flex mb-10"},[a("base-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-1/3 px-2",attrs:{name:"date",mindate:new Date,type:"date",placeholder:"Date","custom-classes":["border","border-purple"],message:t.errors.first("create.date")},model:{value:t.appointments.date,callback:function(e){t.$set(t.appointments,"date",e)},expression:"appointments.date"}}),a("base-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-1/3 px-2",attrs:{name:"time",type:"time",placeholder:"Time","custom-classes":["border","border-purple"],message:t.errors.first("create.time")},model:{value:t.appointments.time,callback:function(e){t.$set(t.appointments,"time",e)},expression:"appointments.time"}}),a("base-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-1/3 px-2",attrs:{name:"location",type:"location",placeholder:"Select a ubication","custom-classes":["w-1/4","border","border-purple"],message:t.errors.first("create.location")},on:{place:t.handleLocation},model:{value:t.appointments.location,callback:function(e){t.$set(t.appointments,"location",e)},expression:"appointments.location"}})],1)]),a("div",{staticClass:"flex"}),a("div",{staticClass:"flex"},[a("div",{staticClass:"w-1/2 max-h-screen overflow-hidden"},[t._m(0),a("ul",{staticClass:"h-full pb-24 overflow-y-scroll"},t._l(t.appointments.slots,function(e,s){return a("SlotItem",{key:s,attrs:{data:e},model:{value:e.is_walk,callback:function(a){t.$set(e,"is_walk",a)},expression:"slot.is_walk"}})}),1)]),a("div",{staticClass:"border-l border-gray-300 w-1/2 flex p-10 max-h-full flex-col "},[a("p",{staticClass:"py-2 pt-5 text-purple"},[t._v("\n        Appointment Slots\n      ")]),a("div",{staticClass:"relative w-full"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.appointments.spaces,expression:"appointments.spaces"}],staticClass:"w-full slots-input py-3 px-4 text-xl text-purple font-bold rounded-full border border-purple ",attrs:{type:"number",placeholder:"0"},domProps:{value:t.appointments.spaces},on:{input:[function(e){e.target.composing||t.$set(t.appointments,"spaces",e.target.value)},t.makeSlots]}}),a("span",{staticClass:"appointment-label w-2/3 text-center right-0 absolute text-white rounded-r-full py-3 text-xl px-4 border border-transparent"},[t._v("\n          Appointments\n        ")])]),a("p",{staticClass:"pt-5 text-purple"},[t._v("\n        Appointment type\n      ")]),a("base-select",{staticClass:"w-full",attrs:{"custom-classes":["border border-purple"]},on:{input:t.makeSlots},model:{value:t.appointments.type,callback:function(e){t.$set(t.appointments,"type",e)},expression:"appointments.type"}},[a("option",{attrs:{value:"1"}},[t._v("\n          Time\n        ")]),a("option",{attrs:{value:"2"}},[t._v("\n          Numeric\n        ")])]),a("p",{staticClass:"pt-5 text-purple"},[t._v("\n        Appointment length\n      ")]),a("base-select",{staticClass:"w-full",attrs:{"custom-classes":["border border-purple"]},on:{input:t.makeSlots},model:{value:t.appointments.length,callback:function(e){t.$set(t.appointments,"length",e)},expression:"appointments.length"}},[a("option",{attrs:{value:"10"}},[t._v("\n          10 minutes\n        ")]),a("option",{attrs:{value:"20"}},[t._v("\n          20 minutes\n        ")]),a("option",{attrs:{value:"30"}},[t._v("\n          30 minutes\n        ")]),a("option",{attrs:{value:"40"}},[t._v("\n          40 minutes\n        ")]),a("option",{attrs:{value:"50"}},[t._v("\n          50 minutes\n        ")]),a("option",{attrs:{value:"60"}},[t._v("\n          60 minutes\n        ")])]),a("p",{staticClass:"pt-5 text-purple"},[t._v("\n        Start time\n      ")]),a("base-input",{staticClass:"w-full",attrs:{type:"text",name:"time",time:!0,"custom-classes":["border","border-purple"]},on:{input:t.makeSlots},model:{value:t.appointments.start,callback:function(e){t.$set(t.appointments,"start",e)},expression:"appointments.start"}}),a("p",{staticClass:"pt-5 text-purple"},[t._v("\n        End time\n      ")]),a("base-input",{staticClass:"w-full",attrs:{type:"text",name:"time",time:!0,"custom-classes":["border","border-purple"],readonly:""},model:{value:t.appointments.end,callback:function(e){t.$set(t.appointments,"end",e)},expression:"appointments.end"}}),a("base-button",{staticClass:"mt-6",attrs:{expanded:""},on:{click:t.handleCreate}},[t._v("\n        Done\n      ")])],1)])],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-full flex w-full items-center px-8"},[a("div",{staticClass:"w-3/4"},[a("h1",{staticClass:"text-purple ml-2"},[t._v("Manage Appointments")])]),a("p",{staticClass:"text-purple text-xs w-24 text-center ml-10"},[t._v("\n          Mark as Walk-In Appointment\n        ")])])}],i=(a("ac6a"),a("5df3"),a("96cf"),a("3b8d")),o=(a("28a5"),a("cebc")),l=a("2f62"),r=a("0e4f"),p=(a("182a"),a("c437"),a("59ca"),a("bc3a")),c=a.n(p),u=a("9062"),m=a.n(u),d=(a("e40d"),{name:"AppointmentsModal",components:{SlotItem:r["default"],Loading:m.a},props:{data:{type:Object,default:function _default(){return{spaces:null,type:1,length:10,start:"08:00",end:"",slots:[]}}}},data:function data(){return{appointments:{},selectedLocation:null,isLoading:!1,form:{dates:[{type:1},{type:2}],roles:[],appointment:void 0,contributors:[],media:[]}}},watch:{data:function data(t){this.appointments=Object.assign({},t)}},created:function created(){this.appointments=Object.assign({},this.data),this.$emit("input",this.appointments)},computed:Object(o["a"])({},Object(l["c"])("round",["rounds"])),methods:Object(o["a"])({},Object(l["b"])("round",["fetch"]),{makeSlots:function makeSlots(){if(/^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/.test(this.appointments.start)){var t=parseInt(this.appointments.spaces),e=this.appointments.start;this.appointments.slots=[];for(var a=0;a<t;a++){this.appointments.slots.push({time:e,number:1==this.appointments.type?null:a+1,status:!1,is_walk:!1});var s=e.split(":"),n=parseInt(s[0],10),i=parseInt(s[1],10);i+=parseInt(this.appointments.length,10),i>=60&&(n+=1,n>=24&&(n="0"),i=60===i?0:i-60),e="".concat(n<10?"0".concat(n):n,":").concat(i<10?"0".concat(i):i)}this.appointments.end=this.appointments.slots.length?e:""}},handleLocation:function handleLocation(t){this.selectedLocation=t},handleCreate:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function _callee(){var t,e,a,s,n;return regeneratorRuntime.wrap(function _callee$(i){while(1)switch(i.prev=i.next){case 0:if(t=null,e=[],a=[],i.prev=1,i.t0=this.isLoading,i.t0){i.next=7;break}return i.next=6,this.$validator.validateAll("create");case 6:i.t0=!i.sent;case 7:if(!i.t0){i.next=9;break}return i.abrupt("return");case 9:return this.isLoading=!0,this.appointments.appointment=this.appointments.online?{spaces:10,type:1,length:"20",start:"10:00",end:"18:00",slots:null}:this.appointments.appointment,this.appointments.status=!0,this.appointments.number_slots=this.appointments.spaces,this.appointments.round=3,i.next=16,this.fetch(this.$route.params.id);case 16:return s=this.rounds.slice(-1),s.length>0&&(this.appointments.round=parseInt(s[0].round)+1),n=Object.assign({},this.appointments),this.selectedLocation&&(n.location={latitude:this.selectedLocation.geometry.location.lat(),longitude:this.selectedLocation.geometry.location.lng(),latitudeDelta:.0043,longitudeDelta:.0043}),i.next=22,c.a.post("/t/appointment/".concat(this.$route.params.id,"/rounds"),n);case 22:this.isLoading=!1,this.$toasted.success("The round has created successfully."),i.next=35;break;case 26:return i.prev=26,i.t1=i["catch"](1),this.$toasted.error("Audition not created, try later."),console.log(i.t1),t&&t.ref.delete(),i.next=33,Promise.all(e.map(function(t){return t.ref.delete()}));case 33:return i.next=35,Promise.all(a.map(function(t){return t.ref.delete()}));case 35:case"end":return i.stop()}},_callee,this,[[1,26]])}));function handleCreate(){return t.apply(this,arguments)}return handleCreate}()})}),f=d,v=(a("4700"),a("2877")),h=Object(v["a"])(f,s,n,!1,null,"30fe52b9",null);e["default"]=h.exports},8943:function(t,e,a){}}]);
//# sourceMappingURL=auditions.round.6f008b92.js.map